---
- name: Update system and repository cache (apt)
  become: yes
  apt:
    update_cache: yes
    upgrade: dist
    state: latest

- name: Install core packages
  become: yes
  apt:
    name: zsh,git,vim

- name: Create sudo group
  become: true
  group:
    name: sudo

- name: Copy sudoers file for `sudo` group
  become: true
  copy:
    src: 99-sudo
    dest: /etc/sudoers.d/99-sudo
    owner: root
    group: root
    mode: 0640

- name: Create user `plump`
  become: yes
  user:
    name: plump
    password: matthew
    shell: /usr/bin/zsh
    group: users
    groups:
      - sudo

- name: Add ssh keys for `plump`
  become: yes
  ansible.posix.authorized_key:
    user: plump
    key: https://github.com/PlumpAlbert.keys
    path: /home/plump/.ssh/authorized_keys
